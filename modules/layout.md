[Go back ](../README.md)

## Preview Laravel Layout <a name="layout_laravel"></a>

## Php And Index.php <a name="php_and_index_php"></a>

In any programming language, there is usually a startpoint to start a project. Print c, go, c++, it's main() function,
print php, it's index.php

## Index.php in Laravel <a name="index_php_laravel"></a>

The vesion I use is laravel 7.5, this is source framework https://github.com/laravel/framework/tree/7.x.
This is source index.php https://github.com/laravel/laravel/blob/7.x/public/index.php

Inline 24, you see code:
``` require __DIR__.'/../vendor/autoload.php';```

Print php, use compose control version. In line 24, laravel require autoload of project. Laravel will load all Class
Loader, including Laravel core and third editor packet.

InLine 38:

``` 
$app = require_once __DIR__.'/../bootstrap/app.php';
``` 

Laravel mapping and building interface of laravel with application.

print line 52 to 60:

``` 
$kernel = $app->make(Illuminate\Contracts\Http\Kernel::class);

$response = $kernel->handle(
$request = Illuminate\Http\Request::capture()
);

$response->send();

$kernel->terminate($request, $response);
``` 

Laravel make one instance of Kernel Laravel, Laravel get incoming request from webserver, push to endpoint and response
request. Laravel terminate index.php, and terminate the process handle request generated by the webserver

## Public folder in laravel <a name="public_folder_index_php_laravel"></a>

Why laravel has public folder? Why is index.php in there. Benefits and security of public folders. <br/>

Let's refer to a simple config of apache2 vs laravel:

``` 
<VirtualHost *:80>
ServerAdmin admin@test.com
ServerName test.com
DocumentRoot /home/anonymous/Desktop/Laravel/test/src/public

    <Directory/home/anonymous/Desktop/Laravel/test/src/public >
        Options -Indexes +FollowSymLinks +MultiViews
        AllowOverride All
        Require all granted
        <FilesMatch \.php$>
            # Change this "proxy:unix:/path/to/fpm.socket"
            # if using a Unix socket
            #SetHandler "proxy:fcgi://127.0.0.1:9000"
        </FilesMatch>
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/myapp.com-error.log

    # Possible values ​​include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn
    CustomLog ${APACHE_LOG_DIR}/myapp.com-access.log combined
``` 

First, Laravel creates a public folder to contain the system's public files or resources, SymLinks. +FollowSymLinks
Config folder public allows webserver FollowSymLinks, "+MultiViews" : A MultiViews search is where the server does an
implicit filename pattern match,and choose from amongst the results , “AllowOverride” which allows you to override some
Apache settings via a . htaccess file you can place in a director. This config allows the webserver to do a lot of
things with the public folder, it allows the webserver to access the files in the public folder and return it to the
browser. Therefore, only files that are public will be placed in the public folder.

## When save file in public folder <a name="when_save_file_in_public_folder"></a>

With the public file used for all users, you should save it in the public folder: css, js, images... </br>
The files are specific to the request or the specific session, not stored in the public folder. Let's imagine with
user1, request 1 you create 1.txt file, you save that file in public folder. File 1.txt is created at server handle
request 1, called server 1. at Request 2, user1 get 1.xlsl, but loadbalance is not forward to server1, but is forwarded
to server2. Clearly, server2 don't have the file 1.txt, confused. For this problem, use the same remote server as S3,
don't use Laravel's public folder

[Go back ](../README.md)